<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"></script>
</head>
<body>
<script>
    // WebSocket 对象作为一个构造函数，用于新建 WebSocket 实例。客户端会与服务器进行连接。
    var ws = new WebSocket("wss://echo.websocket.org");

    // 当 WebSocket 的连接状态readyState 变为1时调用;这意味着当前连接已经准备好发送和接受数据。这个事件处理程序通过 事件（建立连接时）触发。
    ws.onopen = function(evt) {
        console.log("Connection open ...");
        ws.send("Hello WebSockets!");
    };

    // 0 (WebSocket.CONNECTING) 正在链接中
    // 1 (WebSocket.OPEN) 已经链接并且可以通讯
    // 2 (WebSocket.CLOSING) 连接正在关闭
    // 3 (WebSocket.CLOSED) 连接已关闭或者没有链接成功
    console.log(wx.readyState)
    // 当收到来自服务器的消息时被调用
    ws.onmessage = function(evt) {
        console.log( "Received Message: " + evt.data);
        // ws.close();
    };

    // WebSocket 连接的 readyState 变为 CLOSED 时被调用
    ws.onclose = function(evt) {
        console.log("Connection closed.");
    }

    // 发生错误时执行
    ws.onerror = function(event) {
        console.error("WebSocket error observed:", event);
    };
</script>
</body>
</html>
